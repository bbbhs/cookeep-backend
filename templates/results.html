<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìš”ë¦¬ ì¶”ì²œ ê²°ê³¼</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .container { max-width: 800px; margin-top: 30px; }
        .match-bar { height: 10px; border-radius: 5px; }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="mb-4 text-center">ğŸ½ï¸ ì¶”ì²œ ê²°ê³¼ TOP {{ recommendations|length }}</h1>
        <p class="text-center text-muted">ê°€ì§€ê³  ê³„ì‹  ì¬ë£Œë¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ìš”ë¦¬ë“¤ì…ë‹ˆë‹¤.</p>

        {% for rec in recommendations %}
        <div class="card mb-4 shadow-sm">
            <div class="card-body">
                <h5 class="card-title text-primary">{{ loop.index }}. {{ rec.name }}</h5>
                
                {% set percentage = (rec.match_ratio * 100) | round(1) %}
                <p class="card-text mb-1">
                    <strong>ì¬ë£Œ ì¼ì¹˜ìœ¨:</strong> {{ percentage }}%
                </p>
                
                <div class="progress mb-3" role="progressbar" style="height: 20px;">
                    <div class="progress-bar {% if percentage >= 75 %}bg-success{% elif percentage >= 50 %}bg-warning{% else %}bg-danger{% endif %}" style="width: {{ percentage }}%">
                        {{ percentage }}%
                    </div>
                </div>

                <p class="card-text">
                    <strong>âœ”ï¸ ì‚¬ìš© ê°€ëŠ¥ ì¬ë£Œ:</strong> <span class="badge text-bg-success">{{ rec.matched_materials | join(', ') }}</span>
                </p>
                
                {% if rec.missing_materials %}
                <p class="card-text">
                    <strong>âŒ ë¶€ì¡±í•œ ì¬ë£Œ:</strong> <span class="badge text-bg-danger">{{ rec.missing_materials | join(', ') }}</span>
                </p>
                {% else %}
                <p class="card-text text-success">
                    <strong>ğŸ¥³ ëª¨ë“  ì¬ë£Œê°€ ì¶©ë¶„í•©ë‹ˆë‹¤!</strong>
                </p>
                {% endif %}

                <p class="card-text mt-3 text-muted border-top pt-2">
                    <strong>ê°„ë‹¨ ì¡°ë¦¬ë²•:</strong> {{ rec.steps }}
                </p>

            </div>
        </div>
        {% endfor %}

        <div class="text-center mt-5 mb-5">
            <a href="/" class="btn btn-secondary">ë‹¤ì‹œ ì‹œì‘í•˜ê¸°</a>
        </div>
    </div>
</body>
</html>